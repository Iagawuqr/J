-- Script para copiar link do servidor privado atual do Roblox

-- FunÃ§Ã£o para obter informaÃ§Ãµes do servidor atual
local function getCurrentServerInfo()
    local success, result = pcall(function()
        -- Tenta acessar o serviÃ§o de TeleportService para obter o placeId atual
        local TeleportService = game:GetService("TeleportService")
        
        -- ObtÃ©m o ID do jogo atual
        local placeId = game.PlaceId
        
        -- Tenta obter o jobId (ID da sessÃ£o/servidor)
        local jobId = game.JobId or ""

        return placeId, jobId
    end)
    
    if success then
        return result
    else
        return nil, nil
    end
end

-- FunÃ§Ã£o para detectar o sistema operacional
local function get_os()
    local os_name = package.config:sub(1,1) == "\\" and "windows" or "unix"
    return os_name
end

-- FunÃ§Ã£o para copiar para Ã¡rea de transferÃªncia no Windows
local function copy_to_clipboard_windows(text)
    local pipe = io.popen('clip', 'w')
    if pipe then
        pipe:write(text)
        pipe:close()
        return true
    end
    return false
end

-- FunÃ§Ã£o para copiar para Ã¡rea de transferÃªncia no Linux/macOS
local function copy_to_clipboard_unix(text)
    local commands = {
        'xclip -selection clipboard',
        'xsel --clipboard --input',
        'pbcopy'
    }
    
    for _, cmd in ipairs(commands) do
        local pipe = io.popen(cmd, 'w')
        if pipe then
            pipe:write(text)
            local success = pipe:close()
            if success then return true end
        end
    end
    return false
end

-- FunÃ§Ã£o principal para copiar texto
local function copy_to_clipboard(text)
    local os_type = get_os()
    
    if os_type == "windows" then
        return copy_to_clipboard_windows(text)
    else
        return copy_to_clipboard_unix(text)
    end
end

-- FunÃ§Ã£o para gerar o link do servidor privado
local function generatePrivateServerLink()
    local placeId, jobId = getCurrentServerInfo()
    
    if placeId and jobId and jobId ~= "" then
        -- Formato do link de servidor privado do Roblox
        local privateServerLink = "https://www.roblox.com/games/" .. placeId .. "?privateServerLinkCode=" .. jobId
        return privateServerLink
    else
        return nil
    end
end

-- ExecuÃ§Ã£o principal
print("ğŸ” Obtendo informaÃ§Ãµes do servidor atual...")

local serverLink = generatePrivateServerLink()

if serverLink then
    print("âœ… Servidor detectado!")
    print("ğŸ® Place ID: " .. game.PlaceId)
    print("ğŸ”— Job ID: " .. game.JobId)
    print("\nğŸ“‹ Gerando link do servidor privado...")
    
    -- Tentar copiar para a Ã¡rea de transferÃªncia
    if copy_to_clipboard(serverLink) then
        print("âœ… Link copiado para a Ã¡rea de transferÃªncia!")
        print("ğŸ”— Link: " .. serverLink)
        print("ğŸ® Agora vocÃª pode colar (Ctrl+V) para compartilhar!")
    else
        print("âŒ NÃ£o foi possÃ­vel copiar automaticamente")
        print("ğŸ”— Link manual: " .. serverLink)
        print("ğŸ’¡ Copie manualmente o link acima")
    end
else
    print("âŒ NÃ£o foi possÃ­vel obter as informaÃ§Ãµes do servidor")
    print("ğŸ’¡ Certifique-se de que estÃ¡ em um servidor privado vÃ¡lido")
    
    -- Mostrar informaÃ§Ãµes disponÃ­veis
    if game.PlaceId then
        print("ğŸ® Place ID: " .. game.PlaceId)
    end
    if game.JobId then
        print("ğŸ”— Job ID: " .. game.JobId)
    end
end

-- Pausa para o usuÃ¡rio ver a mensagem (apenas no Windows)
if get_os() == "windows" then
    print("\nâ³ Pressione qualquer tecla para continuar...")
    os.execute("pause >nul")
end
